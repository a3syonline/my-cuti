<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MY Cuti</title>
    <style>
        :root {
            --primary: #003580; --accent: #ed1c24; --bg: #f0f2f5;
            --white: #ffffff; --text: #1a1a1a; --shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        * { box-sizing: border-box; transition: all 0.25s ease; }
        
        body { 
            font-family: 'Segoe UI', system-ui, sans-serif; 
            margin: 0; 
            color: var(--text); 
            width: 100%; 
            overflow-x: hidden;
            background: linear-gradient(120deg, #fdfcfb, #e2d1c3, #f5f7fa, #c3cfe2, #e0f2f1, #fff9e6);
            background-size: 600% 600%;
            animation: holidayGradient 20s ease infinite;
        }

        @keyframes holidayGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        header { background: var(--primary); color: white; padding: 3rem 1rem; text-align: center; border-bottom: 6px solid var(--accent); }
        .main-wrapper { max-width: 800px; width: 100%; margin: -30px auto 50px; padding: 0 15px; }
        .countdown-container { background: var(--white); padding: 25px; border-radius: 20px; text-align: center; box-shadow: var(--shadow); margin-bottom: 25px; }
        .countdown-container b { color: var(--accent); font-size: clamp(1.2rem, 4vw, 2rem); display: block; }
        .controls { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; position: sticky; top: 10px; z-index: 100; }
        select { flex: 1; min-width: 140px; padding: 15px; border-radius: 12px; border: none; background: var(--white); font-weight: 700; box-shadow: var(--shadow); font-size: 0.95rem; cursor: pointer; }
        .holiday-card { background: var(--white); border-radius: 18px; margin-bottom: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border-left: 6px solid #ddd; cursor: pointer; overflow: hidden; width: 100%; }
        .holiday-card.national { border-left-color: var(--primary); }
        .holiday-card.state { border-left-color: #ffc107; }
        .card-body { padding: 20px; display: flex; align-items: center; }
        .date-badge { background: #f0f4f8; min-width: 70px; height: 70px; border-radius: 12px; display: flex; flex-direction: column; justify-content: center; align-items: center; margin-right: 20px; }
        .date-badge b { font-size: 1.8rem; color: var(--primary); line-height: 1; }
        .date-badge span { font-size: 0.75rem; text-transform: uppercase; font-weight: 800; color: #666; }
        .drill-down { max-height: 0; opacity: 0; padding: 0 20px; background: #fafafa; overflow: hidden; border-top: 0 solid #eee; }
        .holiday-card.active .drill-down { max-height: 1000px; opacity: 1; padding: 20px; border-top-width: 1px; }
        .section-label { color: var(--primary); font-weight: 800; font-size: 0.75rem; text-transform: uppercase; display: block; margin-bottom: 5px; }
        .greeting-box { background: #fff9e6; border-radius: 10px; padding: 15px; margin-top: 15px; border-left: 4px solid #ffc107; font-style: italic; color: #856404; font-weight: 600; }
        @media (max-width: 480px) { .date-badge { min-width: 60px; height: 60px; margin-right: 15px; } .date-badge b { font-size: 1.4rem; } }
    </style>
</head>
<body>

<header>
    <h1 style="margin:0;">MY Cuti</h1>
</header>

<div class="main-wrapper">
    <div class="countdown-container" id="countdown">Loading Dataset...</div>
    <div class="controls">
        <select id="stateFilter" onchange="renderDisplay()">
            <option value="National">🌍 National Only</option>
            <option value="Kuala Lumpur">Kuala Lumpur</option>
            <option value="Labuan">Labuan</option>
            <option value="Putrajaya">Putrajaya</option>
            <option value="Sabah">Sabah</option>
            <option value="Sarawak">Sarawak</option>
            <option value="Johor">Johor</option>
            <option value="Selangor">Selangor</option>
            <option value="Penang">Penang</option>
            <option value="Perak">Perak</option>
            <option value="Pahang">Pahang</option>
            <option value="Melaka">Melaka</option>
            <option value="Negeri Sembilan">Negeri Sembilan</option>
            <option value="Kedah">Kedah</option>
            <option value="Kelantan">Kelantan</option>
            <option value="Terengganu">Terengganu</option>
            <option value="Perlis">Perlis</option>
        </select>
        <select id="yearFilter" onchange="renderDisplay()">
            <option value="2025">2025</option>
            <option value="2026" selected>2026</option>
            <option value="2027">2027</option>
        </select>
    </div>
    <div id="list"></div>
</div>

<script>
    const HOLIDAY_DB = {
        "2025": [
            { name: "New Year's Day", date: "2025-01-01", isNational: true, cat: "General" },
            { name: "Chinese New Year", date: "2025-01-29", isNational: true, cat: "CNY" },
            { name: "Federal Territory Day", date: "2025-02-01", isNational: false, states: ["Kuala Lumpur", "Labuan", "Putrajaya"], cat: "General" },
            { name: "Hari Raya Aidilfitri", date: "2025-03-31", isNational: true, cat: "Raya" },
            { name: "Labour Day", date: "2025-05-01", isNational: true, cat: "General" },
            { name: "National Day", date: "2025-08-31", isNational: true, cat: "Merdeka" },
            { name: "Malaysia Day", date: "2025-09-16", isNational: true, cat: "MalaysiaDay" },
            { name: "Christmas Day", date: "2025-12-25", isNational: true, cat: "Christmas" }
        ],
        "2026": [
            { name: "New Year's Day", date: "2026-01-01", isNational: true, cat: "General" },
            { name: "Federal Territory Day", date: "2026-02-01", isNational: false, states: ["Kuala Lumpur", "Labuan", "Putrajaya"], cat: "General" },
            { name: "Thaipusam", date: "2026-02-01", isNational: false, states: ["Kuala Lumpur", "Putrajaya", "Selangor", "Penang", "Perak", "Johor", "Negeri Sembilan"], cat: "General" },
            { name: "Chinese New Year", date: "2026-02-17", isNational: true, cat: "CNY" },
            { name: "Chinese New Year (Day 2)", date: "2026-02-18", isNational: true, cat: "CNY" },
            { name: "Hari Raya Aidilfitri", date: "2026-03-20", isNational: true, cat: "Raya" },
            { name: "Hari Raya Aidilfitri (Day 2)", date: "2026-03-21", isNational: true, cat: "Raya" },
            { name: "Labour Day", date: "2026-05-01", isNational: true, cat: "General" },
            { name: "Hari Raya Haji", date: "2026-05-27", isNational: true, cat: "Raya" },
            { name: "Pesta Kaamatan", date: "2026-05-30", isNational: false, states: ["Sabah", "Labuan"], cat: "Kaamatan" },
            { name: "Pesta Kaamatan (Day 2)", date: "2026-05-31", isNational: false, states: ["Sabah", "Labuan"], cat: "Kaamatan" },
            { name: "Wesak Day", date: "2026-05-31", isNational: true, cat: "General" },
            { name: "Hari Gawai", date: "2026-06-01", isNational: false, states: ["Sarawak"], cat: "Gawai" },
            { name: "Hari Gawai (Day 2)", date: "2026-06-02", isNational: false, states: ["Sarawak"], cat: "Gawai" },
            { name: "Awal Muharram", date: "2026-06-17", isNational: true, cat: "General" },
            { name: "National Day (Merdeka)", date: "2026-08-31", isNational: true, cat: "Merdeka" },
            { name: "Maulidur Rasul", date: "2026-08-25", isNational: true, cat: "General" },
            { name: "Malaysia Day", date: "2026-09-16", isNational: true, cat: "MalaysiaDay" },
            { name: "Deepavali", date: "2026-11-08", isNational: true, cat: "Deepavali" },
            { name: "Christmas Day", date: "2026-12-25", isNational: true, cat: "Christmas" },
            { name: "Sultan of Selangor's Birthday", date: "2026-12-11", isNational: false, states: ["Selangor"], cat: "General" },
            { name: "Sultan of Johor's Birthday", date: "2026-03-23", isNational: false, states: ["Johor"], cat: "General" },
            { name: "Governor of Sabah's Birthday", date: "2026-10-03", isNational: false, states: ["Sabah"], cat: "General" }
        ],
        "2027": [
            { name: "New Year's Day", date: "2027-01-01", isNational: true, cat: "General" },
            { name: "Chinese New Year", date: "2027-02-06", isNational: true, cat: "CNY" },
            { name: "Federal Territory Day", date: "2027-02-01", isNational: false, states: ["Kuala Lumpur", "Labuan", "Putrajaya"], cat: "General" },
            { name: "Hari Raya Aidilfitri", date: "2027-03-10", isNational: true, cat: "Raya" },
            { name: "Labour Day", date: "2027-05-01", isNational: true, cat: "General" },
            { name: "National Day", date: "2027-08-31", isNational: true, cat: "Merdeka" },
            { name: "Malaysia Day", date: "2027-09-16", isNational: true, cat: "MalaysiaDay" },
            { name: "Christmas Day", date: "2027-12-25", isNational: true, cat: "Christmas" }
        ]
    };

    const CONTENT = {
        "CNY": { 
            about: "Chinese New Year, also known as the Spring Festival, marks the beginning of the new year on the traditional lunisolar Chinese calendar. It is a 15-day celebration focused on family reunions, honoring ancestors, and ushering in good luck. Traditions include the Reunion Dinner on the eve, giving red envelopes (Ang Pow), and vibrant lion or dragon dances.", 
            greet: ["Gong Xi Fa Cai! May the new year bring you immense wealth, health, and happiness! 🧧"] 
        },
        "Raya": { 
            about: "Hari Raya Aidilfitri celebrates the conclusion of Ramadan, the holy month of fasting. It is a season of forgiveness and renewal. Malaysians traditionally hold 'Open Houses,' welcoming friends and neighbors of all races to share traditional food like Ketupat, Rendang, and Lemang.", 
            greet: ["Selamat Hari Raya Aidilfitri! Maaf Zahir dan Batin to you and your loved ones. 🌙"] 
        },
        "Kaamatan": { 
            about: "Pesta Kaamatan is a harvest thanksgiving festival celebrated by the Kadazan-Dusun community in Sabah. It honors the legend of Huminodun and the Rice Spirit, Bambazon. Key events include the Magavau ritual, Sugandoi singing competitions, and the Unduk Ngadau (Harvest Queen) pageant.", 
            greet: ["Kotobian Tadau Tagazo Do Kaamatan! May your harvest be bountiful and your spirit strong. 🌾"] 
        },
        "Gawai": { 
            about: "Hari Gawai is the harvest festival of the Dayak people in Sarawak. It marks the end of the harvesting season and is a time of thanksgiving. Celebrations involve traditional dances (Ngajat), music, and sharing of Tuak (rice wine) within the longhouse community.", 
            greet: ["Gayu Guru, Gerai Nyamai! Wishing you long life, health, and great prosperity. 🌾"] 
        },
        "Merdeka": { 
            about: "Hari Merdeka commemorates the independence of the Federation of Malaya from British rule on August 31, 1957. It is a day of national unity, famously symbolized by the seven shouts of 'Merdeka!' by Tunku Abdul Rahman at Stadium Merdeka.", 
            greet: ["Selamat Hari Merdeka! Let us celebrate the freedom and unity of our beloved nation. 🇲🇾"] 
        },
        "MalaysiaDay": { 
            about: "Malaysia Day commemorates the establishment of the Malaysian federation on September 16, 1963. It celebrates the joining together of Malaya, North Borneo (Sabah), and Sarawak into a single nation, honoring the diversity of its people.", 
            greet: ["Happy Malaysia Day! One heart, one soul, one beautiful Malaysia. 🇲🇾"] 
        },
        "Deepavali": { 
            about: "Deepavali, or the Festival of Lights, signifies the victory of light over darkness and good over evil. Hindu families decorate their homes with oil lamps (diyas) and vibrant Kolam floor art made from colored rice. It is a time for family gatherings and festive sweets.", 
            greet: ["Happy Deepavali! May the divine light bring joy and success into your home. 🪔"] 
        },
        "Christmas": { 
            about: "Christmas celebrates the birth of Jesus Christ. In Malaysia, it is a joyful season for the Christian community and is celebrated by all with gift-giving, festive decorations in malls, and sharing meals with friends and family.", 
            greet: ["Merry Christmas! May your home be filled with the joy of the season and the warmth of love. 🎄"] 
        },
        "General": { 
            about: "Malaysia is a multicultural nation that celebrates a wide variety of public holidays. These holidays are essential moments for reflection, community bonding, and respect for the diverse cultures and religions that make up the nation.", 
            greet: ["Happy Holidays! Wishing you a wonderful and restful day. 😊"] 
        }
    };

    function renderDisplay() {
        const year = document.getElementById('yearFilter').value;
        const selectedState = document.getElementById('stateFilter').value;
        const list = document.getElementById('list');
        const countdown = document.getElementById('countdown');
        
        const data = HOLIDAY_DB[year] || [];
        list.innerHTML = '';
        data.sort((a, b) => new Date(a.date) - new Date(b.date));

        const now = new Date();
        const next = data.find(h => new Date(h.date) >= now);
        if (next) {
            const diff = Math.ceil((new Date(next.date) - now) / 86400000);
            countdown.innerHTML = `Upcoming: <b>${next.name}</b> in <b>${diff} days</b>`;
        } else {
            countdown.innerHTML = "No more holidays this year!";
        }

        data.forEach(h => {
            const isNational = h.isNational;
            const isStateMatch = h.states && h.states.includes(selectedState);
            
            if (selectedState === "National" ? isNational : (isNational || isStateMatch)) {
                const d = new Date(h.date);
                const info = CONTENT[h.cat] || CONTENT["General"];
                const card = document.createElement('div');
                card.className = `holiday-card ${isNational ? 'national' : 'state'}`;
                card.onclick = () => card.classList.toggle('active');
                card.innerHTML = `
                    <div class="card-body">
                        <div class="date-badge"><b>${d.getDate()}</b><span>${d.toLocaleString('en-US',{month:'short'})}</span></div>
                        <div>
                            <h3 style="margin:0">${h.name}</h3>
                            <small>${isNational ? 'National' : 'Regional'} Holiday</small>
                        </div>
                    </div>
                    <div class="drill-down">
                        <span class="section-label">Background</span>
                        <p style="margin:0; font-size:0.95rem; line-height: 1.5;">${info.about}</p>
                        <div class="greeting-box">"${info.greet[0]}"</div>
                    </div>
                `;
                list.appendChild(card);
            }
        });
    }

    renderDisplay();
</script>
</body>
</html>