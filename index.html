<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MY Cuti</title>
    <style>
        :root {
            --primary: #003580; --accent: #ed1c24; --bg: #f0f2f5;
            --white: #ffffff; --text: #1a1a1a; --shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        * { box-sizing: border-box; transition: all 0.25s ease; }
        body { 
            font-family: 'Segoe UI', system-ui, sans-serif; margin: 0; color: var(--text); width: 100%; overflow-x: hidden;
            background: linear-gradient(120deg, #fdfcfb, #e2d1c3, #f5f7fa, #c3cfe2, #e0f2f1, #fff9e6);
            background-size: 600% 600%; animation: holidayGradient 20s ease infinite;
        }
        @keyframes holidayGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        header { background: var(--primary); color: white; padding: 3rem 1rem; text-align: center; border-bottom: 6px solid var(--accent); }
        .main-wrapper { max-width: 800px; width: 100%; margin: -30px auto 50px; padding: 0 15px; }
        .countdown-container { background: var(--white); padding: 25px; border-radius: 20px; text-align: center; box-shadow: var(--shadow); margin-bottom: 25px; }
        .countdown-container b { color: var(--accent); font-size: clamp(1.2rem, 4vw, 2rem); display: block; }
        .controls { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; position: sticky; top: 10px; z-index: 100; }
        select { flex: 1; min-width: 140px; padding: 15px; border-radius: 12px; border: none; background: var(--white); font-weight: 700; box-shadow: var(--shadow); font-size: 0.95rem; cursor: pointer; }
        .holiday-card { background: var(--white); border-radius: 18px; margin-bottom: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border-left: 6px solid #ddd; cursor: pointer; overflow: hidden; width: 100%; }
        .holiday-card.national { border-left-color: var(--primary); }
        .holiday-card.state { border-left-color: #ffc107; }
        .card-body { padding: 20px; display: flex; align-items: center; }
        .date-badge { background: #f0f4f8; min-width: 70px; height: 70px; border-radius: 12px; display: flex; flex-direction: column; justify-content: center; align-items: center; margin-right: 20px; }
        .date-badge b { font-size: 1.8rem; color: var(--primary); line-height: 1; }
        .date-badge span { font-size: 0.75rem; text-transform: uppercase; font-weight: 800; color: #666; }
        .drill-down { max-height: 0; opacity: 0; padding: 0 20px; background: #fafafa; overflow: hidden; border-top: 0 solid #eee; }
        .holiday-card.active .drill-down { max-height: 1000px; opacity: 1; padding: 20px; border-top-width: 1px; }
        .section-label { color: var(--primary); font-weight: 800; font-size: 0.75rem; text-transform: uppercase; display: block; margin-bottom: 5px; }
        .greeting-box { background: #fff9e6; border-radius: 10px; padding: 15px; margin-top: 15px; border-left: 4px solid #ffc107; font-style: italic; color: #856404; font-weight: 600; }
        @media (max-width: 480px) { .date-badge { min-width: 60px; height: 60px; margin-right: 15px; } .date-badge b { font-size: 1.4rem; } }
    </style>
</head>
<body>

<header>
    <h1 style="margin:0;">MY Cuti</h1>
</header>

<div class="main-wrapper">
    <div class="countdown-container" id="countdown">Loading Dataset...</div>
    <div class="controls">
        <select id="stateFilter" onchange="renderDisplay()">
            <option value="National">🌍 National Only</option>
            <option value="Kuala Lumpur">Kuala Lumpur</option>
            <option value="Labuan">Labuan</option>
            <option value="Putrajaya">Putrajaya</option>
            <option value="Sabah" selected>Sabah</option>
            <option value="Sarawak">Sarawak</option>
            <option value="Johor">Johor</option>
            <option value="Selangor">Selangor</option>
            <option value="Penang">Penang</option>
            <option value="Perak">Perak</option>
            <option value="Pahang">Pahang</option>
            <option value="Melaka">Melaka</option>
            <option value="Negeri Sembilan">Negeri Sembilan</option>
            <option value="Kedah">Kedah</option>
            <option value="Kelantan">Kelantan</option>
            <option value="Terengganu">Terengganu</option>
            <option value="Perlis">Perlis</option>
        </select>
        <select id="yearFilter" onchange="renderDisplay()">
            <option value="2025">2025</option>
            <option value="2026" selected>2026</option>
            <option value="2027">2027</option>
        </select>
    </div>
    <div id="list"></div>
</div>

<script>
    // 1. DATASET: Every Day is a Unique Entry. All multi-day holidays share the exact same name string.
    const HOLIDAY_DB = {
        "2025": [
            { name: "New Year's Day", date: "2025-01-01", isNational: true },
            { name: "Chinese New Year", date: "2025-01-29", isNational: true },
            { name: "Chinese New Year", date: "2025-01-30", isNational: true },
            { name: "Federal Territory Day", date: "2025-02-01", isNational: false, states: ["Kuala Lumpur", "Labuan", "Putrajaya"] },
            { name: "Hari Raya Aidilfitri", date: "2025-03-31", isNational: true },
            { name: "Hari Raya Aidilfitri", date: "2025-04-01", isNational: true },
            { name: "Labour Day", date: "2025-05-01", isNational: true },
            { name: "Pesta Kaamatan", date: "2025-05-30", isNational: false, states: ["Sabah", "Labuan"] },
            { name: "Pesta Kaamatan", date: "2025-05-31", isNational: false, states: ["Sabah", "Labuan"] },
            { name: "National Day", date: "2025-08-31", isNational: true },
            { name: "Malaysia Day", date: "2025-09-16", isNational: true },
            { name: "Christmas Day", date: "2025-12-25", isNational: true }
        ],
        "2026": [
            { name: "New Year's Day", date: "2026-01-01", isNational: true },
            { name: "Federal Territory Day", date: "2026-02-01", isNational: false, states: ["Kuala Lumpur", "Labuan", "Putrajaya"] },
            { name: "Thaipusam", date: "2026-02-01", isNational: false, states: ["Kuala Lumpur", "Putrajaya", "Selangor", "Penang", "Perak", "Johor", "Negeri Sembilan"] },
            { name: "Chinese New Year", date: "2026-02-17", isNational: true },
            { name: "Chinese New Year", date: "2026-02-18", isNational: true },
            { name: "Hari Raya Aidilfitri", date: "2026-03-20", isNational: true },
            { name: "Hari Raya Aidilfitri", date: "2026-03-21", isNational: true },
            { name: "Labour Day", date: "2026-05-01", isNational: true },
            { name: "Hari Raya Haji", date: "2026-05-27", isNational: true },
            { name: "Pesta Kaamatan", date: "2026-05-30", isNational: false, states: ["Sabah", "Labuan"] },
            { name: "Pesta Kaamatan", date: "2026-05-31", isNational: false, states: ["Sabah", "Labuan"] },
            { name: "Wesak Day", date: "2026-05-31", isNational: true },
            { name: "Hari Gawai", date: "2026-06-01", isNational: false, states: ["Sarawak"] },
            { name: "Hari Gawai", date: "2026-06-02", isNational: false, states: ["Sarawak"] },
            { name: "Awal Muharram", date: "2026-06-17", isNational: true },
            { name: "Maulidur Rasul", date: "2026-08-25", isNational: true },
            { name: "National Day", date: "2026-08-31", isNational: true },
            { name: "Malaysia Day", date: "2026-09-16", isNational: true },
            { name: "Deepavali", date: "2026-11-08", isNational: true },
            { name: "Christmas Day", date: "2026-12-25", isNational: true }
        ],
        "2027": [
            { name: "New Year's Day", date: "2027-01-01", isNational: true },
            { name: "Federal Territory Day", date: "2027-02-01", isNational: false, states: ["Kuala Lumpur", "Labuan", "Putrajaya"] },
            { name: "Chinese New Year", date: "2027-02-06", isNational: true },
            { name: "Chinese New Year", date: "2027-02-07", isNational: true },
            { name: "Hari Raya Aidilfitri", date: "2027-03-10", isNational: true },
            { name: "Hari Raya Aidilfitri", date: "2027-03-11", isNational: true },
            { name: "Labour Day", date: "2027-05-01", isNational: true },
            { name: "Pesta Kaamatan", date: "2027-05-30", isNational: false, states: ["Sabah", "Labuan"] },
            { name: "Pesta Kaamatan", date: "2027-05-31", isNational: false, states: ["Sabah", "Labuan"] },
            { name: "National Day", date: "2027-08-31", isNational: true },
            { name: "Malaysia Day", date: "2027-09-16", isNational: true },
            { name: "Christmas Day", date: "2027-12-25", isNational: true }
        ]
    };

    // 2. ENCYCLOPEDIA: Unique entry for every name. Shared names naturally pull the same data.
    const INFO_BANK = {
        "New Year's Day": {
            about: "The start of the Gregorian year. Malaysia celebrates with fireworks and countdowns, especially in urban hubs like KL.",
            greet: "Happy New Year! Wishing you a brilliant 365 days ahead. 🎆"
        },
        "Federal Territory Day": {
            about: "Honors the formation of KL, Labuan, and Putrajaya. It celebrates the progress and growth of these central administrative hearts.",
            greet: "Happy Federal Territory Day! Proud of our vibrant federal territories. 🏙️"
        },
        "Thaipusam": {
            about: "A Hindu festival honoring Lord Murugan. Known for the massive, colorful processions and devotion at Batu Caves.",
            greet: "Wishing you a meaningful and blessed Thaipusam. 🪔"
        },
        "Chinese New Year": {
            about: "Spring Festival marking the new lunar year. It is a time for family reunions, lion dances, and sharing prosperity.",
            greet: "Gong Xi Fa Cai! May the new year bring you immense wealth and health! 🧧"
        },
        "Hari Raya Aidilfitri": {
            about: "Marks the joyous end of Ramadan. A season of seeking forgiveness and sharing joy through 'Open Houses' and Rendang.",
            greet: "Selamat Hari Raya Aidilfitri! Maaf Zahir dan Batin to you and your loved ones. 🌙"
        },
        "Labour Day": {
            about: "Honors the contributions of workers to the nation's development. A day of rest and recognition for the Malaysian workforce.",
            greet: "Happy Labour Day! To all the hard workers, enjoy your well-deserved break! 👷"
        },
        "Hari Raya Haji": {
            about: "Commemorates Prophet Ibrahim's obedience. Marks the Hajj pilgrimage conclusion and is observed with prayers and charity.",
            greet: "Selamat Hari Raya Haji! Wishing you a blessed day of reflection and sacrifice. 🕋"
        },
        "Pesta Kaamatan": {
            about: "Sabah's harvest thanksgiving festival. It honors the Rice Spirit, Bambazon, and the rich cultural heritage of the state.",
            greet: "Kotobian Tadau Tagazo Do Kaamatan! May your harvest be bountiful. 🌾"
        },
        "Wesak Day": {
            about: "Commemorates the birth, enlightenment, and passing of Buddha. Observed with prayers and kindness to promote peace.",
            greet: "Happy Wesak Day! May you find peace and enlightenment on this sacred day. ☸️"
        },
        "Hari Gawai": {
            about: "Sarawak's harvest festival. A time of thanksgiving in longhouses with traditional music and the Ngajat dance.",
            greet: "Gayu Guru, Gerai Nyamai! Wishing you long life and prosperity. 🌾"
        },
        "Awal Muharram": {
            about: "The Islamic New Year. Commemorates the migration (Hijrah) of Prophet Muhammad and is a time for spiritual reflection.",
            greet: "Salam Awal Muharram. May this new Hijri year bring peace and spiritual growth. 🕌"
        },
        "Maulidur Rasul": {
            about: "Celebrates the birthday of Prophet Muhammad. Observed with processions honoring his legacy of mercy and kindness.",
            greet: "Salam Maulidur Rasul. Let us reflect on the mercy and wisdom of the Prophet. 📜"
        },
        "National Day": {
            about: "Hari Merdeka commemorates Malaysia's independence on August 31, 1957. A day of patriotic pride and national unity.",
            greet: "Selamat Hari Merdeka! Let us celebrate the spirit of our independence. 🇲🇾"
        },
        "Malaysia Day": {
            about: "Commemorates the 1963 establishment of Malaysia, joining Malaya, Sabah, and Sarawak into one unified nation.",
            greet: "Happy Malaysia Day! One heart, one soul, one beautiful Malaysia. 🇲🇾"
        },
        "Deepavali": {
            about: "Festival of Lights celebrating victory of light over darkness. Homes are decorated with oil lamps and Kolam art.",
            greet: "Happy Deepavali! May the divine light bring joy and success into your home. 🪔"
        },
        "Christmas Day": {
            about: "Celebrates the birth of Jesus Christ. A joyful season of gift-giving and sharing festive meals with loved ones.",
            greet: "Merry Christmas! May your home be filled with the joy of the season. 🎄"
        }
    };

    function renderDisplay() {
        const year = document.getElementById('yearFilter').value;
        const selectedState = document.getElementById('stateFilter').value;
        const list = document.getElementById('list');
        const countdown = document.getElementById('countdown');
        
        const data = HOLIDAY_DB[year] || [];
        list.innerHTML = '';
        data.sort((a, b) => new Date(a.date) - new Date(b.date));

        const now = new Date();
        const next = data.find(h => new Date(h.date) >= now);
        if (next) {
            const diff = Math.ceil((new Date(next.date) - now) / 86400000);
            countdown.innerHTML = `Upcoming: <b>${next.name}</b> in <b>${diff} days</b>`;
        } else {
            countdown.innerHTML = "No more holidays this year!";
        }

        data.forEach(h => {
            const isNational = h.isNational;
            const isStateMatch = h.states && h.states.includes(selectedState);
            
            if (selectedState === "National" ? isNational : (isNational || isStateMatch)) {
                const d = new Date(h.date);
                // Pulls exactly based on name. multi-day holidays pull the same info automatically.
                const info = INFO_BANK[h.name] || { about: "A public holiday in Malaysia.", greet: "Happy Holidays!" };
                
                const card = document.createElement('div');
                card.className = `holiday-card ${isNational ? 'national' : 'state'}`;
                card.onclick = () => card.classList.toggle('active');
                card.innerHTML = `
                    <div class="card-body">
                        <div class="date-badge"><b>${d.getDate()}</b><span>${d.toLocaleString('en-US',{month:'short'})}</span></div>
                        <div>
                            <h3 style="margin:0">${h.name}</h3>
                            <small>${isNational ? 'National' : 'Regional'} Holiday</small>
                        </div>
                    </div>
                    <div class="drill-down">
                        <span class="section-label">Background</span>
                        <p style="margin:0; font-size:0.95rem; line-height: 1.5;">${info.about}</p>
                        <div class="greeting-box">"${info.greet}"</div>
                    </div>
                `;
                list.appendChild(card);
            }
        });
    }

    renderDisplay();
</script>
</body>
</html>